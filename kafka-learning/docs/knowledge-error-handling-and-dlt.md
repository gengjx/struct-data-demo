# 错误处理、重试与 DLT 必须掌握知识点（对应 assessment DLT）

## 1. 为什么需要 DLT

### 概念

- DLT（Dead Letter Topic）：处理失败且不可立即恢复的消息的隔离区。

### 必会要点

- 失败消息不应无限阻塞主消费链路。
- DLT 必须配套：告警、人工/自动补偿、回放机制。

## 2. 重试策略

### 常见策略

- 立即重试：适合瞬时网络错误。
- 退避重试（backoff）：避免放大下游压力。
- 次数上限：超过阈值进入 DLT。

### 常见坑

- 无限重试导致堆积（lag 持续上升）。

### 对应考核

- DLT 验收：`consume-dlt` 重试 3 次，失败写入 `kafka.learning.demo.dlt`。
- 知识题 10：DLT 与无限重试取舍。

## 3. DLT 后的补偿/回放

### 必会要点

- 回放前要明确：
  - 是否可重复处理（幂等）
  - 是否需要修复数据/依赖
  - 回放速率控制

