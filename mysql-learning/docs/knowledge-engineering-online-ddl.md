# 大表 DDL 变更必须掌握知识点（对应 questions-engineering 题 5）

## 1. 直接 ALTER TABLE 的风险

### 概念

- 大表 DDL 可能引入元数据锁（MDL），阻塞读写。
- 执行时间不可控，可能导致业务抖动、复制延迟。

### 必会要点

- 识别 DDL 类型：加字段、加索引、修改列类型，不同变更的锁行为不同。
- 变更期间关注：锁等待、复制延迟、回滚策略。

## 2. 低风险变更思路

### 常见策略

- Online DDL：尽量选择支持在线的变更方式。
- 影子表/在线变更工具思路：
  - 建新表结构
  - 增量同步
  - 切换

### 工程化要点

- 选择窗口期、灰度、可回滚。
- DDL 前做容量与耗时评估。

## 对应题目

- 题 5

## 考核要点/验收清单

- **验收项**：能说明直接 `ALTER TABLE` 的至少 3 个风险（MDL、耗时不可控、复制延迟/业务抖动）。
- **验收项**：能描述一种低风险变更路径（Online DDL 或影子表/在线变更工具思路）。
- **验收项**：能列出变更前后的工程化动作（评估、窗口期、灰度、回滚预案与观测指标）。
