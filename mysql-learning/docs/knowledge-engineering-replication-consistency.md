# 主从复制与一致性必须掌握知识点（对应 questions-engineering 题 3）

## 1. 主从复制的基本认知

### 概念

- MySQL 主从复制以 binlog 为基础，通常是异步链路，天然存在延迟。

### 必会要点

- 延迟的后果：读写分离后“读不到刚写的数据”（读己之写问题）。
- 复制延迟的常见诱因：大事务、从库 IO/SQL 线程压力、DDL、锁等待。

## 2. 读写分离下的一致性策略

### 常见策略

- 关键读走主库：下单后查询订单详情、支付后查支付状态。
- 读主窗口：写后 X 秒内强制读主。
- 位点/GTID 等待：写入后等待从库追到指定位点再读从。

### 常见坑

- “所有读都走从”在强一致场景一定会踩坑。

## 3. 半同步与增强一致性

### 概念

- 半同步可以降低“主库返回成功但从库没收到”的概率，但不是银弹。

## 对应题目

- 题 3

## 考核要点/验收清单

- **验收项**：能解释主从延迟带来的典型问题（读己之写/数据不一致窗口）。
- **验收项**：能给出至少 2 种解决思路（关键读主、读主窗口、位点/GTID 等待）。
- **验收项**：能说出复制延迟的至少 3 个常见诱因（大事务、DDL、从库回放压力、锁等待等）。
