# 如何用 Cursor 把代码改造成"高级工程师风格"

## 🎯 实战场景：改进你的 Sort.java

### 场景1：添加参数校验

**你的操作**：
1. 选中 `bubbleSort` 方法
2. 在 Cursor 中输入：

```
帮我给这个方法添加参数校验：
- 如果 array 为 null，抛出 IllegalArgumentException，错误信息为"数组不能为 null"
- 如果 array.length <= 1，直接返回（边界情况处理）
- 保持原有排序逻辑不变
```

**Cursor 会帮你**：
- 自动添加 `validateArray` 方法
- 在方法开头添加校验逻辑
- 保持原有代码逻辑不变

---

### 场景2：生成完整的 JavaDoc

**你的操作**：
1. 选中整个 `Sort` 类
2. 在 Cursor 中输入：

```
帮我为这个类生成完整的 JavaDoc 文档，要求：
- 类级别：说明这是一个排序工具类，提供多种排序算法
- 方法级别：每个方法都要有完整的文档，包括：
  * 算法描述
  * 时间复杂度、空间复杂度、稳定性
  * 适用场景
  * @param 参数说明
  * @throws 异常说明
  * 如果有相关方法，用 @see 链接
- 使用标准的 JavaDoc 格式（/** */）
- 包含使用示例（用 <pre>{@code ...}</pre>）
```

**Cursor 会帮你**：
- 把所有 `/* */` 注释改成 `/** */` JavaDoc
- 补充完整的参数和异常说明
- 添加算法复杂度分析
- 添加使用示例

---

### 场景3：重构为泛型版本

**你的操作**：
1. 选中 `bubbleSort(int[] a)` 方法
2. 在 Cursor 中输入：

```
帮我把这个方法改造成支持泛型的版本，要求：
1. 保留原有的 int[] 版本（向后兼容）
2. 新增一个支持实现了 Comparable 接口的泛型版本
3. 新增一个支持自定义 Comparator 的泛型版本
4. 所有版本都要有参数校验
5. 对象类型版本要检查 null 元素
6. 保持代码风格统一
```

**Cursor 会帮你**：
- 生成三个重载方法
- 自动提取公共的交换逻辑为 `swap` 方法
- 添加适当的类型约束和校验

---

### 场景4：代码风格统一

**你的操作**：
1. 选中整个文件
2. 在 Cursor 中输入：

```
帮我统一这个文件的代码风格，要求：
- 参数名从 `a` 改为 `array`（更语义化）
- 变量名 `flag` 改为 `swapped`（更清晰）
- 统一空格风格：运算符周围要有空格，如 `i + 1` 而不是 `i+1`
- 统一大括号风格：左大括号不换行
- 统一注释风格：使用 JavaDoc 格式
- 保持原有逻辑不变
```

**Cursor 会帮你**：
- 批量重命名变量
- 统一代码格式
- 保持逻辑不变

---

### 场景5：提取公共方法

**你的操作**：
1. 选中所有排序方法
2. 在 Cursor 中输入：

```
帮我重构这些排序方法，要求：
- 提取交换元素的逻辑为独立的 `swap` 方法
- 提取参数校验逻辑为独立的 `validateArray` 方法
- 保持原有功能不变
- 提高代码复用性
```

**Cursor 会帮你**：
- 识别重复代码
- 提取公共方法
- 重构调用处

---

### 场景6：添加工具类设计

**你的操作**：
1. 选中类声明
2. 在 Cursor 中输入：

```
这是一个工具类，所有方法都是静态的。帮我：
- 添加 `final` 关键字，防止被继承
- 添加私有构造函数，防止实例化
- 在私有构造函数中抛出 AssertionError
- 添加类级别的 JavaDoc 说明这是工具类
```

**Cursor 会帮你**：
- 添加 `final` 关键字
- 生成私有构造函数
- 添加说明文档

---

## 💡 Cursor 提示语模板库

### 模板1：参数校验
```
帮我给这个方法添加参数校验：
- 参数 [参数名] 不能为 null，如果为 null 抛出 IllegalArgumentException，错误信息为"[具体信息]"
- 参数 [参数名] 需要满足 [条件]，如果不满足抛出 IllegalArgumentException
- 在方法开头进行校验
```

### 模板2：边界处理
```
帮我添加边界情况处理：
- 如果 [条件]，直接返回 [返回值]
- 如果 [条件]，抛出 [异常类型]，错误信息为"[具体信息]"
- 保持原有核心逻辑不变
```

### 模板3：JavaDoc 生成
```
帮我为这个方法生成完整的 JavaDoc，要求：
- 方法描述：[简要说明方法的作用]
- 算法说明：[如果是算法，说明算法思路]
- 性能分析：时间复杂度、空间复杂度、稳定性
- @param：每个参数都要说明
- @return：如果有返回值要说明
- @throws：列出所有可能抛出的异常
- @see：如果有相关方法要链接
- 使用示例：用 <pre>{@code ...}</pre> 格式
```

### 模板4：泛型改造
```
帮我把这个方法改造成支持泛型的版本：
- 保留原有 [具体类型] 版本（向后兼容）
- 新增泛型版本，支持 [类型约束，如 Comparable]
- 新增支持自定义 Comparator 的版本
- 所有版本都要有参数校验
- 保持代码风格统一
```

### 模板5：代码重构
```
帮我重构这段代码，要求：
- 提取重复逻辑为独立方法
- 方法职责单一
- 提高代码复用性
- 保持原有功能不变
- 添加必要的注释说明
```

### 模板6：异常处理
```
帮我改进异常处理：
- 将 [异常类型] 改为抛出 [更具体的异常类型]
- 错误信息要清晰，包含上下文信息
- 遵循"快速失败"原则
- 保持原有逻辑不变
```

---

## 🎓 最佳实践

### 1. **分步骤改进，不要一次性改太多**

❌ **不好的做法**：
```
帮我完全重写这个类，让它变成高级工程师的代码
```

✅ **好的做法**：
```
第一步：先帮我添加参数校验
（等 Cursor 完成后再继续）
第二步：再帮我生成 JavaDoc
第三步：最后帮我重构为泛型版本
```

### 2. **明确你的约束和偏好**

✅ **好的提示**：
```
帮我改进这个方法，要求：
- 使用 JDK 17
- 遵循 Google Java Style Guide
- 保持向后兼容
- 添加完整的单元测试
```

### 3. **让 Cursor 解释为什么**

✅ **好的提示**：
```
帮我改进这段代码，并解释：
- 为什么要这样改？
- 有什么潜在问题？
- 有没有更好的方案？
```

### 4. **Review Cursor 的输出**

记住：**Cursor 是助手，不是替代品**

- ✅ 检查生成的代码是否符合你的预期
- ✅ 运行测试确保功能正常
- ✅ 检查是否有性能问题
- ✅ 确认代码风格符合团队规范

---

## 🚀 实战练习

### 练习1：改进你的 Sort.java

1. **打开** `Sort.java`
2. **选中** `bubbleSort` 方法
3. **在 Cursor 中输入**：
   ```
   按照 SortImproved.java 的风格，帮我改进这个方法：
   - 添加参数校验
   - 添加边界处理
   - 生成完整的 JavaDoc
   - 改进变量命名
   - 提取 swap 方法
   ```
4. **Review** Cursor 的输出
5. **运行测试**确保功能正常
6. **对比** 原版和改进版，理解改进点

### 练习2：应用到你的其他代码

选择你项目中的另一个类（比如 `ArrayQueue.java`），按照同样的方式改进：

1. 添加参数校验
2. 添加边界处理
3. 生成 JavaDoc
4. 改进命名
5. 提取公共方法

---

## 📝 总结

**高级工程师的代码 = 功能正确 + 设计优雅 + 文档完整 + 易于维护**

**用 Cursor 辅助改进代码的流程**：
1. 明确改进目标（参数校验/文档/重构等）
2. 用清晰的提示语告诉 Cursor
3. Review 并测试 Cursor 的输出
4. 逐步迭代改进

**记住**：Cursor 是工具，你是决策者。保持主导权，让 Cursor 做"体力活"。

